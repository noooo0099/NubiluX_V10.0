@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 0 0% 5.9%; /* #0F0F0F - nxe-dark */
  --foreground: 0 0% 100%; /* white */
  --muted: 0 0% 15.9%; /* #282828 - nxe-surface */
  --muted-foreground: 0 0% 64.9%; /* gray-400 */
  --popover: 0 0% 10.2%; /* #1A1A1A - nxe-surface */
  --popover-foreground: 0 0% 98%;
  --card: 0 0% 16.5%; /* #2A2A2A - nxe-card */
  --card-foreground: 0 0% 98%;
  --border: 147 100% 15%; /* #134D37 with low opacity */
  --input: 0 0% 16.5%; /* #2A2A2A */
  --primary: 147 100% 20%; /* #134D37 - nxe-primary */
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 16.5%; /* #2A2A2A */
  --secondary-foreground: 0 0% 98%;
  --accent: 142 76% 36%; /* #22C55E - nxe-accent */
  --accent-foreground: 0 0% 98%;
  --destructive: 0 84% 60%; /* #EF4444 - nxe-error */
  --destructive-foreground: 0 0% 98%;
  --ring: 147 100% 20%; /* #134D37 */
  --radius: 0.75rem;

  /* NXE specific colors */
  --nxe-primary: 147 100% 20%; /* #134D37 */
  --nxe-dark: 0 0% 5.9%; /* #0F0F0F */
  --nxe-surface: 0 0% 10.2%; /* #1A1A1A */
  --nxe-card: 0 0% 16.5%; /* #2A2A2A */
  --nxe-accent: 142 76% 36%; /* #22C55E */
  --nxe-warning: 38 92% 50%; /* #F59E0B */
  --nxe-error: 0 84% 60%; /* #EF4444 */
  --nxe-text: 0 0% 64.9%; /* gray-400 */
  --nxe-border: 0 0% 23.5%; /* #3C3C3C */
  --nxe-secondary: 0 0% 52.9%; /* gray-500 */
}

.dark {
  --background: 0 0% 5.9%;
  --foreground: 0 0% 98%;
  --muted: 0 0% 15.9%;
  --muted-foreground: 0 0% 64.9%;
  --popover: 0 0% 10.2%;
  --popover-foreground: 0 0% 98%;
  --card: 0 0% 16.5%;
  --card-foreground: 0 0% 98%;
  --border: 147 100% 15%;
  --input: 0 0% 16.5%;
  --primary: 147 100% 20%;
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 16.5%;
  --secondary-foreground: 0 0% 98%;
  --accent: 142 76% 36%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 98%;
  --ring: 147 100% 20%;
  
  /* NXE specific colors for dark theme */
  --nxe-primary: 147 100% 20%; /* #134D37 */
  --nxe-dark: 0 0% 5.9%; /* #0F0F0F */
  --nxe-surface: 0 0% 10.2%; /* #1A1A1A */
  --nxe-card: 0 0% 16.5%; /* #2A2A2A */
  --nxe-accent: 142 76% 36%; /* #22C55E */
  --nxe-warning: 38 92% 50%; /* #F59E0B */
  --nxe-error: 0 84% 60%; /* #EF4444 */
  --nxe-text: 0 0% 64.9%; /* gray-400 */
  --nxe-border: 0 0% 23.5%; /* #3C3C3C */
  --nxe-secondary: 0 0% 52.9%; /* gray-500 */
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }

  /* Custom scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@layer components {
  /* Mobile viewport and keyboard fixes */
  .mobile-viewport-fix {
    /* Use CSS env() for safe area insets */
    min-height: 100vh;
    min-height: -webkit-fill-available;
    min-height: calc(var(--vh, 1vh) * 100);
    position: relative;
    overflow-x: hidden;
  }

  /* Prevent layout shifts on mobile keyboard */
  .mobile-stable {
    /* Use visual viewport for stable positioning */
    height: 100dvh; /* Dynamic viewport height */
    height: 100svh; /* Small viewport height as fallback */
  }

  /* Bottom navigation safe positioning */
  .bottom-nav-safe {
    /* Position relative to visual viewport, not layout viewport */
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    /* Ensure it stays above keyboard */
    transform: translateZ(0);
    will-change: transform;
    /* Prevent animation jank */
    backface-visibility: hidden;
    /* Use safe area for modern devices */
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Smooth keyboard transitions */
  @media (max-width: 768px) {
    .keyboard-smooth * {
      transition-property: transform, opacity, background-color, border-color, color, fill, stroke;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 150ms;
    }
    
    /* Prevent viewport jumping */
    .keyboard-smooth {
      /* Use contain for better performance */
      contain: layout style paint;
      /* Prevent scrolling issues */
      touch-action: manipulation;
    }
  }

  /* Input focus optimizations */
  .mobile-input-fix input,
  .mobile-input-fix textarea {
    /* Prevent zoom on focus for iOS */
    font-size: max(16px, 1rem);
    /* Optimize for mobile keyboard */
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Glassmorphism fix for mobile */
  .nxe-glass {
    /* GPU acceleration */
    transform: translateZ(0);
    will-change: backdrop-filter;
    /* Better backdrop-filter performance */
    isolation: isolate;
  }

  /* Performance optimized animations */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }

  /* NXE specific component styles */
  .nxe-logo {
    font-family: 'Inter', sans-serif;
    font-weight: 700;
  }

  .nxe-glass {
    backdrop-filter: blur(10px);
    background: rgba(15, 15, 15, 0.8);
    border: 1px solid rgba(19, 77, 55, 0.2);
  }

  .nxe-nav-item {
    @apply flex flex-col items-center p-2 transition-colors duration-200;
  }

  .nxe-nav-item.active {
    @apply text-[hsl(var(--nxe-primary))];
  }

  .nxe-nav-item:not(.active) {
    @apply text-gray-400 hover:text-white;
  }

  .nxe-product-card {
    @apply bg-[hsl(var(--nxe-card))] rounded-xl overflow-hidden hover:scale-105 transition-transform duration-200 cursor-pointer;
  }

  .nxe-featured-card {
    @apply bg-[hsl(var(--nxe-card))] rounded-xl p-4 border border-[hsl(var(--nxe-primary))]/20 hover:border-[hsl(var(--nxe-primary))]/40 transition-all cursor-pointer;
  }

  .nxe-status-item {
    @apply flex-shrink-0 cursor-pointer hover:scale-105 transition-transform duration-200;
  }

  .nxe-quick-action {
    @apply w-12 h-12 rounded-full flex items-center justify-center text-white shadow-lg hover:scale-110 transition-transform duration-200;
  }
}

@layer utilities {
  /* Custom animations */
  @keyframes searchExpand {
    0% { width: 0%; opacity: 0; }
    100% { width: 60%; opacity: 1; }
  }

  @keyframes logoShrink {
    0% { transform: scale(1); }
    100% { transform: scale(0.8); }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  @keyframes pulseGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(19, 77, 55, 0.3); }
    50% { box-shadow: 0 0 20px rgba(19, 77, 55, 0.6); }
  }

  @keyframes progressSlide {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  @keyframes glow {
    0%, 100% { filter: drop-shadow(0 0 5px rgba(19, 77, 55, 0.5)); }
    50% { filter: drop-shadow(0 0 15px rgba(34, 197, 94, 0.8)); }
  }

  .animate-search-expand {
    animation: searchExpand 0.3s ease-out forwards;
  }

  .animate-logo-shrink {
    animation: logoShrink 0.3s ease-out forwards;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  .animate-progress-slide {
    animation: progressSlide 2s linear infinite;
  }

  .animate-glow {
    animation: glow 2s ease-in-out infinite;
  }

  /* NXE color utilities */
  .bg-nxe-primary {
    background-color: hsl(var(--nxe-primary));
  }

  .bg-nxe-dark {
    background-color: hsl(var(--nxe-dark));
  }

  .bg-nxe-surface {
    background-color: hsl(var(--nxe-surface));
  }

  .bg-nxe-card {
    background-color: hsl(var(--nxe-card));
  }

  .bg-nxe-accent {
    background-color: hsl(var(--nxe-accent));
  }

  .text-nxe-primary {
    color: hsl(var(--nxe-primary));
  }

  .text-nxe-accent {
    color: hsl(var(--nxe-accent));
  }

  .border-nxe-primary {
    border-color: hsl(var(--nxe-primary));
  }

  .border-nxe-surface {
    border-color: hsl(var(--nxe-surface));
  }

  .text-nxe-text {
    color: hsl(var(--nxe-text));
  }

  .text-nxe-secondary {
    color: hsl(var(--nxe-secondary));
  }

  .border-nxe-border {
    border-color: hsl(var(--nxe-border));
  }

  .bg-nxe-border {
    background-color: hsl(var(--nxe-border));
  }

  .text-nxe-warning {
    color: hsl(var(--nxe-warning));
  }

  .text-nxe-error {
    color: hsl(var(--nxe-error));
  }

  .bg-nxe-warning {
    background-color: hsl(var(--nxe-warning));
  }

  .bg-nxe-error {
    background-color: hsl(var(--nxe-error));
  }

  /* Custom scrollbar for notification modal */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: hsl(var(--nxe-dark));
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, hsl(var(--nxe-primary)), hsl(var(--nxe-accent)));
    border-radius: 10px;
    border: 1px solid hsl(var(--nxe-surface));
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, hsl(var(--nxe-primary) / 0.8), hsl(var(--nxe-accent) / 0.8));
  }

  /* Firefox */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--nxe-primary)) hsl(var(--nxe-dark));
  }
}
